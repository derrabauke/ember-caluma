<div>
  <h3>{{t "caluma.analytics.sections.table_preview"}}</h3>
  {{!--  <button
    class="uk-button uk-button-primary"
    type="button"
    {{on "click" this.observableQuery.refetch}}
  >
    {{t "caluma.analytics.preview.refresh"}}
  </button>
--}}
  <button
    class="uk-button uk-button-secondary"
    type="button"
    {{on "click" this.download}}
  >
    {{t "caluma.analytics.preview.download"}}
  </button>
</div>
<div>
  {{#if this.data.isRunning}}
    <div class="uk-text-center">
      <UkSpinner @ratio={{1}} />
    </div>
  {{else}}
    <table class="uk-table">
      <thead>
        <tr>
          {{#each this.data.value.headings as |header|}}
            <th>
              {{header.alias}}
              {{#if (not-eq header.function "VALUE" i)}}
                ({{header.function}})
              {{/if}}
            </th>
          {{/each}}
        </tr>
      </thead>
      <tbody>
        {{#each this.data.value.fields as |row|}}
          <tr>
            {{#each row as |entry|}}
              <td>
                {{entry.value}}
              </td>
            {{/each}}
          </tr>
        {{/each}}
      </tbody>
    </table>
  {{/if}}
</div>
