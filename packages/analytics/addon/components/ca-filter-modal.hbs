<UkModal
  @visible={{this.visible}}
  @onHide={{fn (mut this.visible) false}}
  as |modal|
>
  <modal.header>
    <h2 class="uk-modal-title">Filters</h2>
  </modal.header>
  <modal.body>

    <div class="uk-flex">
      <input
        id="new-filter"
        class="uk-input"
        type="text"
        placeholder="Filter..."
        value={{this.newFilter}}
        {{on "input" this.updateNewFilter}}
      />

      <UkButton
        @color="primary"
        @disabled={{not this.newFilter}}
        class="uk-flex uk-flex-middle"
        {{on "click" this.addFilter}}
      >
        <UkIcon @icon="plus" @ratio="1.5" />
      </UkButton>
    </div>

    <UkList
      @divider="true"
      class="uk-padding-small uk-padding-remove-left"
      uk-overflow-auto
      as |List|
    >
      {{#each this.filters as |filter|}}
        <List.item class="uk-flex uk-flex-between uk-flex-middle">
          <span>{{filter}}</span>
          <button
            type="button"
            class="uk-icon-button"
            uk-icon="trash"
            title={{t "caluma.analytics.delete_filter"}}
            {{on "click" (fn this.removeFilter filter)}}
          ></button>
        </List.item>
      {{else}}
        <List.item>No filters</List.item>
      {{/each}}
      <List.item />
    </UkList>
  </modal.body>
  <modal.footer class="uk-flex uk-flex-between">
    <UkButton @label="Cancel" @onClick={{fn (mut this.visible) false}}>
      Cancel
    </UkButton>
    <UkButton
      @color="primary"
      @onClick={{perform this.saveField this.graphqlInput}}
      @loading={{this.saveAnalyticsField.isRunning}}
    >
      Save
    </UkButton>
  </modal.footer>
</UkModal>
{{yield
  (component
    "uk-button" label="Open modal" onClick=(fn (mut this.visible) true)
  )
}}
